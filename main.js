(()=>{"use strict";let e=function(){let e=[],t=function(){e.sort(((e,t)=>"Invalid Date"==e.datetime&&"Invalid Date"==t.datetime?0:"Invalid Date"==t.datetime?-1:"Invalid Date"==e.datetime?1:e.datetime-t.datetime)),console.log(e)};return{listArr:e,addTask:function(n){e.push(n),t()},removeTask:function(n){e.splice(n,1),t()}}},t=e(),n=function(){const e=["ALL","DAY","WEEK","MONTH","PROJECT","SUBPROJECT"];let t=0;return{getCurrentPriorityIndex:function(){return t},currentPriorityChange:function(n){t=e.indexOf(n)}}}();function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function i(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function l(e){i(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function a(e,t){i(2,arguments);var n=l(e),a=r(t);return isNaN(a)?new Date(NaN):a?(n.setDate(n.getDate()+a),n):n}function d(e,t){i(2,arguments);var n=l(e),a=r(t);if(isNaN(a))return new Date(NaN);if(!a)return n;var d=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+a+1,0);var c=o.getDate();return d>=c?o:(n.setFullYear(o.getFullYear(),o.getMonth(),d),n)}function o(e,t){if(i(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var n="years"in t?r(t.years):0,o="months"in t?r(t.months):0,c="weeks"in t?r(t.weeks):0,s="days"in t?r(t.days):0,u="hours"in t?r(t.hours):0,p="minutes"in t?r(t.minutes):0,m="seconds"in t?r(t.seconds):0,h=l(e),f=o||n?d(h,o+12*n):h,C=s||c?a(f,s+7*c):f,g=p+60*u,v=m+60*g,E=1e3*v,L=new Date(C.getTime()+E);return L}function c(){if(!document.querySelector("#form")){let e=document.createElement("form");e.setAttribute("id","form");let r=document.createElement("textarea"),i=document.createElement("input");i.setAttribute("type","datetime-local");let l=document.createElement("input");l.setAttribute("type","text");let a=document.createElement("button");a.innerHTML="SUBMIT";let d=document.createElement("button");d.innerHTML="CANCEL",e.appendChild(r),e.appendChild(i),e.appendChild(l),e.appendChild(a),e.appendChild(d),r.placeholder="Description",l.placeholder="Project",5==n.getCurrentPriorityIndex()&&(l.defaultValue=u.currentProject),document.body.appendChild(e),e.classList.add("form"),a.addEventListener("click",(()=>{let{isValid:n,error:a}=(d=r.value,i.value,""==d?{isValid:!1,error:"Write a description for the task"}:{isValid:!0,error:""});var d;if(n){let n={textContent:r.value,datetime:new Date(i.value),project:l.value,isComplete:!1};t.addTask(n),m.appendListElement(),u.updateProjectDiv(l.value),u.getProjectList(),e.remove(),console.log(t.listArr)}else alert(a),e.remove(),c()})),d.addEventListener("click",(()=>e.remove()))}}let s=function(){let e=document.createElement("button");return e.textContent="+",e.addEventListener("click",c),e}(),u=function(){let e=[];function r(t){let n=document.createElement("button");return n.innerHTML="X",n.classList.add("delProject"),n.addEventListener("click",(()=>{for(;m.listContainer.children.length>0;){let e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});m.listContainer.lastChild.lastChild.dispatchEvent(e)}for(let n=0;n<e.length;n++)e[n]==t.textContent&&(e.splice(n,1),n--);let n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});document.getElementById("PRO").dispatchEvent(n)})),n}return{currentProject:"",getProjectList:function(){for(;0!=e.length;)e.pop();for(let n=0;n<t.listArr.length;n++){let r=t.listArr[n];""!=r.project&&!e.indexOf(r.project)>=0&&e.push(r.project)}return e},projectListDiv:function(){let t=document.createElement("ul");t.setAttribute("id","projectList");for(let i=0;i<e.length;i++)if(e.indexOf(e[i])>=i){let l=e[i],a=document.createElement("li");a.textContent=l,a.classList.add("subproject"),t.appendChild(a);let d=r(a);a.addEventListener("click",(()=>{this.currentProject=l,n.currentPriorityChange("SUBPROJECT"),m.appendListElement();for(let e=0;e<a.parentNode.children.length;e++)a.parentNode.children[e].childNodes.length>1&&a.parentNode.children[e].removeChild(a.parentNode.children[e].lastChild);a.appendChild(d)}))}return t},updateProjectDiv:function(t){if(!(e.indexOf(t)>=0)&&""!=t&&n.getCurrentPriorityIndex()>3){let e=document.querySelector("#projectList"),i=document.createElement("li");i.textContent=t,e.appendChild(i),i.classList.add("subproject");let l=r(i);i.addEventListener("click",(()=>{this.currentProject=t,n.currentPriorityChange("SUBPROJECT"),m.appendListElement();for(let e=0;e<i.parentNode.children.length;e++)i.parentNode.children[e].childNodes.length>1&&i.parentNode.children[e].removeChild(i.parentNode.children[e].lastChild);i.appendChild(l)}))}}}}(),p=function(e){let t=document.createElement("li");t.classList.add("listElementContainer"),t.classList.add("listElement");let n=document.createElement("textarea"),r=document.createElement("div"),i=document.createElement("div"),l=document.createElement("input");l.setAttribute("type","checkbox"),1==e.isComplete&&(t.classList.add("completed"),l.checked=!0);let a=document.createElement("button");return a.textContent="DELETE",n.value=e.textContent,n.addEventListener("change",(()=>e.textContent=n.value)),r.style.whiteSpace="pre-line",r.textContent="Invalid Date"==e.datetime?"---":"BY : "+o(e.datetime,{years:0,months:0,weeks:0,days:0,hours:5,minutes:30}).toISOString().replace("T","\r\nTIME  :  ").replace(":00.000Z",""),i.textContent=e.project,new Date-e.datetime>0&&t.classList.add("late"),l.addEventListener("click",(n=>{console.log(n),n.target.checked?(e.isComplete=!0,t.classList.add("completed")):(e.isComplete=!1,t.classList.remove("completed"))})),t.appendChild(l),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(a),t},m=function(){let r=document.createElement("ul");function i(){let l=function(){let r=new Date,i=e(),l=t.listArr.filter((function(e){switch(n.getCurrentPriorityIndex()){case 0:return!0;case 1:if("Invalid Date"==e.datetime)return!1;if(e.datetime.toDateString()==r.toDateString())return!0;case 2:return e.datetime<o(r,{years:0,months:0,weeks:1,days:0});case 3:return e.datetime<o(r,{years:0,months:1});case 4:return""!=e.project;case 5:return e.project.toString()==u.currentProject.toString()}}));for(let e=0;e<l.length;e++)i.addTask(l[e]);return i}();for(;r.hasChildNodes();)r.removeChild(r.childNodes[0]);for(let e=0;e<l.listArr.length;e++){function a(){for(t.removeTask(t.listArr.indexOf(this));r.hasChildNodes();)r.removeChild(r.childNodes[0]);i(),u.getProjectList()}r.appendChild(p(l.listArr[e])),r.lastChild.lastChild.addEventListener("click",a.bind(l.listArr[e],e))}}return i(),{listContainer:r,appendListElement:i}}(),h=function(){let e=document.createElement("div");function t(t){let r=document.createElement("div");return r.textContent=t,r.addEventListener("click",(()=>{n.currentPriorityChange(t),m.appendListElement(),e.childNodes.forEach((e=>e.classList.remove("highlight"))),"PROJECT"!=t&&r.classList.add("highlight")})),e.appendChild(r),r}return t("ALL"),t("DAY"),t("WEEK"),t("MONTH"),function(){let n=document.createElement("div"),r=t("PROJECT");r.setAttribute("id","PRO"),n.appendChild(r),e.appendChild(n),r.addEventListener("click",(()=>{for(;n.children[1];)n.removeChild(n.children[1]);r.textContent="PROJECT",u.getProjectList(),n.appendChild(u.projectListDiv()),console.log("hi2")}));for(let t=0;t<e.childNodes.length-1;t++)e.childNodes[t].addEventListener("click",(()=>{for(;n.children[1];)n.removeChild(n.children[1])})),n.classList.remove("highlight")}(),e}(),f=document.querySelector("#content"),C=document.createElement("div"),g=window.localStorage;for(let e=0;e<g.length;e++)if(null!=JSON.parse(g.getItem(`${e}`))){let n=JSON.parse(g.getItem(`${e}`));"Invalid Date"==g.getItem(`${e}date`)?n.datetime="Invalid Date":n.datetime=new Date(JSON.parse(g.getItem(`${e}date`))),t.addTask(n)}window.addEventListener("beforeunload",(()=>{g.clear();for(let e=0;e<t.listArr.length;e++)g.setItem(`${e}`,JSON.stringify(t.listArr[e])),g.setItem(`${e}date`,"Invalid Date"==t.listArr[e].datetime?"Invalid Date":JSON.stringify(t.listArr[e].datetime.toJSON()));return null})),C.appendChild(s),C.appendChild(m.listContainer),m.appendListElement(),f.appendChild(C),f.appendChild(h),C.classList.add("listContainer"),h.classList.add("sidebar"),s.classList.add("addButton")})();